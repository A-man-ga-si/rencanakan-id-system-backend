# Rencanakan ID System Backend

This is Rencanakan ID Backend, this application is built on top of [Laravel](https://laravel.com/) Framework.

## Setup

```
composer install
cp .env.example .env
# Change .env content with your preference
php artisan key:generate
php artisan migrate --seed
php artisan serve
```

## API

```
+--------+----------+--------------------------------------------------------------------+------------------------+-------------------------------------------------------------------------+-------------------------------------------------------+
| Domain | Method   | URI                                                                | Name                   | Action                                                                  | Middleware                                            |
+--------+----------+--------------------------------------------------------------------+------------------------+-------------------------------------------------------------------------+-------------------------------------------------------+
|        | GET|HEAD | /                                                                  |                        | Closure                                                                 | web                                                   |
|        | POST     | api/auth/forgot-password                                           |                        | App\Http\Controllers\Auth\ForgotPasswordController@sendConfirmationMail | api                                                   |
|        | POST     | api/auth/login                                                     |                        | App\Http\Controllers\Auth\LoginController@login                         | api                                                   |
|        | POST     | api/auth/logout                                                    |                        | App\Http\Controllers\Auth\LoginController@logout                        | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/auth/register                                                  |                        | App\Http\Controllers\Auth\RegisterController@register                   | api                                                   |
|        | POST     | api/auth/reset-password/verify-token                               |                        | App\Http\Controllers\Auth\ForgotPasswordController@verifyResetToken     | api                                                   |
|        | POST     | api/auth/reset-password/{token}                                    |                        | App\Http\Controllers\Auth\ForgotPasswordController@resetPassword        | api                                                   |
|        | POST     | api/auth/verify                                                    |                        | App\Http\Controllers\Auth\LoginController@verify                        | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/company                                                        |                        | App\Http\Controllers\Company\CompanyController@store                    | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Utils\DetermineRequestDataOwner   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Company\EnsureUserDontHaveCompany |
|        | GET|HEAD | api/company                                                        |                        | App\Http\Controllers\Company\CompanyController@index                    | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/company/{company}                                              |                        | App\Http\Controllers\Company\CompanyController@update                   | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/ahp                                                     |                        | App\Http\Controllers\Master\AhpController@store                         | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/ahp                                                     |                        | App\Http\Controllers\Master\AhpController@index                         | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/ahp/{ahp}                                               |                        | App\Http\Controllers\Master\AhpController@update                        | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/ahp/{ahp}/delete                                        |                        | App\Http\Controllers\Master\AhpController@destroy                       | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/ahs-item/itemable-ids                                   |                        | App\Http\Controllers\Master\AhsItemController@getAhsItemableId          | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/ahs-item/{ahsItem}/delete                               |                        | App\Http\Controllers\Master\AhsItemController@destroy                   | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/ahs-item/{ahsItem}/update                               |                        | App\Http\Controllers\Master\AhsItemController@update                    | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/ahs-item/{ahs}                                          |                        | App\Http\Controllers\Master\AhsItemController@store                     | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/ahs-item/{ahs}                                          |                        | App\Http\Controllers\Master\AhsItemController@index                     | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/ahs/{ahsId?}                                            |                        | App\Http\Controllers\Master\AhsController@index                         | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/ahs/{ahsId?}                                            |                        | App\Http\Controllers\Master\AhsController@store                         | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/ahs/{ahs}/delete                                        |                        | App\Http\Controllers\Master\AhsController@destroy                       | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/ahs/{ahs}/update                                        |                        | App\Http\Controllers\Master\AhsController@update                        | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/item-price                                              |                        | App\Http\Controllers\Master\ItemPriceController@store                   | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/item-price                                              |                        | App\Http\Controllers\Master\ItemPriceController@index                   | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/item-price-group                                        |                        | App\Http\Controllers\Master\ItemPriceGroupController@index              | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/item-price-group                                        |                        | App\Http\Controllers\Master\ItemPriceGroupController@store              | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/item-price-group/{itemPriceGroup}                       |                        | App\Http\Controllers\Master\ItemPriceGroupController@update             | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/item-price-group/{itemPriceGroup}/delete                |                        | App\Http\Controllers\Master\ItemPriceGroupController@destroy            | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/item-price/{itemPriceId}                                |                        | App\Http\Controllers\Master\ItemPriceController@update                  | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/item-price/{itemPrice}/batch-update                     |                        | App\Http\Controllers\Master\ItemPriceController@batchUpdatePrice        | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/item-price/{itemPrice}/delete                           |                        | App\Http\Controllers\Master\ItemPriceController@destroy                 | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/item-price/{itemPrice}/set-price                        |                        | App\Http\Controllers\Master\ItemPriceController@setPrice                | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/provinces                                               |                        | App\Http\Controllers\Master\ProvinceController@index                    | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/unit                                                    |                        | App\Http\Controllers\Master\UnitController@index                        | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/unit                                                    |                        | App\Http\Controllers\Master\UnitController@store                        | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/master/unit/{unit}                                             |                        | App\Http\Controllers\Master\UnitController@update                       | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/master/unit/{unit}/delete                                      |                        | App\Http\Controllers\Master\UnitController@destroy                      | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/payment/demo-add-token                                         |                        | App\Http\Controllers\Payment\PaymentController@addToken                 | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/payment/fetch-snap-token                                       |                        | App\Http\Controllers\Payment\PaymentController@fetchSnapToken           | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project                                                        |                        | App\Http\Controllers\ProjectController@index                            | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project                                                        |                        | App\Http\Controllers\ProjectController@store                            | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project/{project}                                              |                        | App\Http\Controllers\ProjectController@update                           | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project/{project}/delete                                       |                        | App\Http\Controllers\ProjectController@destroy                          | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project/{project}/rab                                          |                        | App\Http\Controllers\RabController@index                                | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project/{project}/rab                                          |                        | App\Http\Controllers\RabController@store                                | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project/{project}/rab/{rab}                                    |                        | App\Http\Controllers\RabController@update                               | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project/{project}/rab/{rab}/delete                             |                        | App\Http\Controllers\RabController@destroy                              | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project/{project}/rab/{rab}/item                               |                        | App\Http\Controllers\RabItemController@index                            | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project/{project}/rab/{rab}/item                               |                        | App\Http\Controllers\RabItemController@store                            | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project/{project}/rab/{rab}/item-header                        |                        | App\Http\Controllers\RabItemHeaderController@index                      | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project/{project}/rab/{rab}/item-header                        |                        | App\Http\Controllers\RabItemHeaderController@store                      | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project/{project}/rab/{rab}/item-header/{rabItemHeader}        |                        | App\Http\Controllers\RabItemHeaderController@update                     | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project/{project}/rab/{rab}/item-header/{rabItemHeader}/delete |                        | App\Http\Controllers\RabItemHeaderController@destroy                    | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/project/{project}/rab/{rab}/item/{rabItem}                     |                        | App\Http\Controllers\RabItemController@update                           | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/project/{project}/rab/{rab}/item/{rabItem}/delete              |                        | App\Http\Controllers\RabItemController@destroy                          | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/user                                                           |                        | Closure                                                                 | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | api/user/{user}                                                    |                        | App\Http\Controllers\User\UserController@show                           | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | POST     | api/user/{user}                                                    |                        | App\Http\Controllers\User\UserController@update                         | api                                                   |
|        |          |                                                                    |                        |                                                                         | App\Http\Middleware\Authenticate:sanctum              |
|        | GET|HEAD | auth/email-verification/confirm/{token}                            | register.confirm_email | App\Http\Controllers\Auth\RegisterController@confirmEmail               | web                                                   |
|        | GET|HEAD | sanctum/csrf-cookie                                                |                        | Laravel\Sanctum\Http\Controllers\CsrfCookieController@show              | web                                                   |
+--------+----------+--------------------------------------------------------------------+------------------------+-------------------------------------------------------------------------+-------------------------------------------------------+
```
